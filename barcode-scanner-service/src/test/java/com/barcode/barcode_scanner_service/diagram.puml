@startuml BarcodeArchitecture_Final
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

title λ°”μ½”λ“ μƒμ„± μ‹μ¤ν… μ•„ν‚¤ν…μ² (μƒμ„± νλ¦„ κ°•μ΅°)

' === 1. π­ μ΅°λ¦½ (Factory) μμ—­ (TOP) ===
Boundary(CreationLayer, "1. μ΅°λ¦½ (Factory) μμ—­") {
    Component(Factory, "BarcodeStrategyFactory", "Strategy Factory")
    Component(Assembler, "BarcodeAssembler", "Helper Factory")
}

' === 2. π§± λ°”μ½”λ“ μƒμ„± μ „λµ λ¬¶μ (MIDDLE) ===
Boundary(BarcodeStrategyBundle, "2. λ°”μ½”λ“ μƒμ„± μ „λµ λ¬¶μ (Contexts)") {
    Component(IBS, "IBarcodeStrategy", "Interface")
    Component(EAN13S, "EAN13Strategy", "Impl. / Context")
    Component(ITF14S, "ITF14Strategy", "Impl. / Context")
}

' === 3. β™οΈ μ²΄ν¬ λ””μ§€νΈ μ „λµ λ¬¶μ (BOTTOM) ===
Boundary(CheckDigitStrategyBundle, "3. μ²΄ν¬ λ””μ§€νΈ κ³„μ‚° μ „λµ λ¬¶μ (Helpers)") {
    Component(ICDS, "ICheckDigitStrategy", "Interface")
    Component(EAN13CDS, "EAN13CheckDigitStrategy", "Impl. / Strategy")
    Component(ITF14CDS, "ITF14CheckDigitStrategy", "Impl. / Strategy")
}

Component(Client, "TestClient", "Client Code")

' --- Relationships (μμ§ λ°°μΉμ™€ νλ¦„) ---
Factory -down-> Assembler : calls
Factory -down-> EAN13S : creates & injects helper
Factory -down-> ITF14S : creates & injects helper

Assembler -down-> EAN13CDS : creates
Assembler -down-> ITF14CDS : creates

EAN13S -down-> ICDS : depends on
ITF14S -down-> ICDS : depends on

Client -up-> Factory : requests strategy

' μΈν„°νμ΄μ¤ κµ¬ν„ κ΄€κ³„
IBS <|-- EAN13S
IBS <|-- ITF14S
ICDS <|-- EAN13CDS
ICDS <|-- ITF14CDS

@enduml